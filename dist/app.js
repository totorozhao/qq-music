!function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.RECOMMEND_URL="https://qq-music-totorozhao.now.sh/",t.TOPLIST_URL="https://qq-music-totorozhao.now.sh/top",t.SEARCH_URL="https://qq-music-totorozhao.now.sh/search",t.HOTKEY_URL="https://qq-music-totorozhao.now.sh/hotkey",t.LYRICS_URL="https://qq-music-totorozhao.now.sh/lyrics"},function(e,t,n){"use strict";function i(e){var t=[].slice.call(e);if("IntersectionObserver"in window){var n=new IntersectionObserver(function(e){e.forEach(function(e){e.intersectionRatio>0&&r(e.target,function(){n.unobserve(e.target)})})},{threshold:.01});t.forEach(function(e){return n.observe(e)})}else{var i=s(function(){if(console.log(new Date),0===t.length)return window.removeEventListener("scroll",i);t=t.filter(function(e){return e.classList.contains("lazyload")}),t.forEach(function(e){o(e)&&r(e)})},500);window.addEventListener("scroll",i),window.dispatchEvent(new Event("scroll"))}}function s(e,t){var n=void 0,i=void 0;return function(){var s=Date.now(),r=s-n;!n||r>=t?(e(),n=s):r<t&&(clearTimeout(i),i=setTimeout(e,t-r))}}function r(e,t){var n=new Image;n.src=e.dataset.src,n.onload=function(){e.src=n.src,e.classList.remove("lazyload"),"function"==typeof t&&t()}}function o(e){var t=e.getBoundingClientRect(),n=t.top,i=t.right,s=t.left,r=t.bottom,o=document.documentElement.clientWidth,a=document.documentElement.clientHeight;return(n>0&&n<a||r>0&&r<a)&&(s>0&&s<o||i>0&&i<o)}Object.defineProperty(t,"__esModule",{value:!0}),t.lazyload=i},function(e,t,n){"use strict";function i(e,t){return a.SEARCH_URL+"?keyword="+e+"&page="+t}function s(e){return"http://dl.stream.qqmusic.qq.com/"+e+".m4a?fromtag=38"}function r(e){return a.LYRICS_URL+"?id="+e}function o(e){return"https://y.gtimg.cn/music/photo_new/T002R150x150M000"+e+".jpg"}Object.defineProperty(t,"__esModule",{value:!0}),t.searchUrl=i,t.songUrl=s,t.lyricsUrl=r,t.albumCoverUrl=o;var a=n(0)},function(e,t,n){"use strict";function i(){var e=location.hash;if(/^#player\?.+/.test(e)){var t=e.slice(e.indexOf("?")+1).match(/(\w+)=([^&]+)/g),n=t&&t.reduce(function(e,t){var n=t.split("=");return e[n[0]]=decodeURIComponent(n[1]),e},{});l.play(n)}else l.hide()}n(4);var s=n(5),r=n(7),o=n(8),a=n(9),c=n(11),l=(new s.Recommend(document.querySelector(".rec-view")).launch(),new r.Rank(document.querySelector(".rank-view")).launch(),new a.Search(document.querySelector(".search-view")),new o.Hotkey(document.querySelector(".search-view")).launch(),new c.MusicPlayer(document.querySelector("#player")));document.querySelector(".show-player").addEventListener("click",function(){l.show()}),window.addEventListener("hashchange",i)},function(e,t,n){"use strict";document.addEventListener("click",function(e){var t=e.target;if("tab"===t.dataset.role){[].forEach.call(t.parentElement.children,function(e){e.classList.remove("active")}),t.classList.add("active");var n=document.querySelector(t.dataset.target);n&&([].forEach.call(n.parentElement.children,function(e){e.style.display="none"}),n.style.display="block")}})},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Recommend=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(6),o=n(1),a=n(0);t.Recommend=function(){function e(t){i(this,e),this.$el=t}return s(e,[{key:"launch",value:function(){var e=this;return fetch(a.RECOMMEND_URL).then(function(e){return e.json()}).then(function(t){return e.json=t}).then(function(){return e.render()}),this}},{key:"render",value:function(){this.renderSlider(this.json.data.slider),this.renderRadioList(this.json.data.radioList),this.renderSongList(this.json.data.songList),(0,o.lazyload)(document.querySelectorAll(".lazyload"))}},{key:"renderSlider",value:function(e){e=e.map(function(e){return{link:e.linkUrl,image:e.picUrl}}),new r.Slider({el:this.$el.querySelector("#slider"),sliders:e})}},{key:"renderRadioList",value:function(e){document.querySelector(".radios .list").innerHTML=e.map(function(e){return'<li class="play-radio"><a>\n            <div class="list-media">\n                <img data-src="'+e.picUrl+'" class="lazyload">\n                <span class="icon-play"></span>\n            </div>\n            <div class="info">\n            <h3 class="info-title">'+e.Ftitle+"</h3>\n            </div>\n        </a></li>"}).join("")}},{key:"renderSongList",value:function(e){document.querySelector(".songList .list").innerHTML=e.map(function(e){return'<li class="play-radio"><a>\n            <div class="list-media">\n                <img data-src="'+e.picUrl+'" class="lazyload">\n                <span class="icon-play"></span>\n            </div>\n            <div class="info">\n            <h3 class="info-title threedot">'+e.songListDesc+'</h3>\n            <p class="author">'+e.songListAuthor+"</p>\n            </div>\t\t\t\t\n        </a></li>"}).join("")}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.Slider=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.$el=t.el,this.sliders=t.sliders,this.auoplay=t.autoplay,this.interval=t.interval||3e3,this.duration=t.duration||300,this.index=0,this.render(),this.start()}return s(e,[{key:"render",value:function(){this.$el.innerHTML='<div class="qq-slider-wrap"></div>',this.$wrap=this.$el.firstElementChild,this.$wrap.style.width=100*this.sliders.length+"%",this.$wrap.style.transitionDuration=this.duration+"ms",this.$wrap.innerHTML=this.sliders.map(function(e){return'<div class="qq-slider-item">\n            <a href="'+e.link+'"><img src="'+e.image+'"></a>\n        </div>'}).join("")}},{key:"start",value:function(){setInterval(this.next.bind(this),this.interval)}},{key:"next",value:function(){++this.index===this.sliders.length&&(this.index=0);var e=""+this.index/this.sliders.length*100;this.$wrap.style.transform="translate(-"+e+"%)"}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Rank=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),o=n(0);t.Rank=function(){function e(t){i(this,e),this.$el=t}return s(e,[{key:"launch",value:function(){var e=this;return fetch(o.TOPLIST_URL).then(function(e){return e.json()}).then(function(t){return e.json=t}).then(function(){return e.renderRank()}),this}},{key:"renderRank",value:function(){this.renderRankList(this.json.data.topList),(0,r.lazyload)(document.querySelectorAll(".lazyload"))}},{key:"renderRankList",value:function(e){var t=void 0;document.querySelector(".rank-view .qq-toplist").innerHTML=e.map(function(e){return t=e.songList.map(function(e,t){return'<p class="threedot">'+(t+1)+'<span class="title">'+e.songname+"</span>-"+e.singername+"</p>"}).join(""),'<li class="topic-item">\n\t\t\t<a class="topic-main">\n\t\t\t\t<img data-src="'+e.picUrl+'" class="lazyload" >\n\t\t\t</a>\n\t\t\t<div class="topic-info">\n\t\t\t\t<div class="topic-wrap">\n\t\t\t\t\t<h3 class="threedot">'+e.topTitle+"</h3>"+t+"</div>\n\t\t\t</div></li>"}).join("")}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.Hotkey=function(){function e(t){i(this,e),this.$el=t}return s(e,[{key:"launch",value:function(){var e=this;return fetch("json/hotsearch.json").then(function(e){return e.json()}).then(function(t){return e.json=t}).then(function(){return e.renderSearch()}),this}},{key:"renderSearch",value:function(){var e='<a href="'+this.json.data.special_url+'" class="tag">'+this.json.data.special_key+"</a>",t=this.json.data.hotkey.sort(function(e,t){return t.n-e.n});t=t.slice(0,11),this.$el.querySelector(".hot-keys .hot-tags").innerHTML=e+t.map(function(e){return'<a href="'+e.n+'" class="tag">'+e.k+"</a>"}).join("")}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Search=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),o=n(10);t.Search=function(){function e(t){i(this,e),this.$el=t,this.$input=this.$el.querySelector("#search-input"),this.$input.addEventListener("keyup",this.onkeyup.bind(this)),this.$songs=this.$el.querySelector(".song-list"),this.page=1,this.songs={},this.keyWord="",this.nomore=!1,this.onscroll=this.onScroll.bind(this),window.addEventListener("scroll",this.onscroll),this.fetching=!1,this.history=new o.SearchHistory(t,this.$input,this)}return s(e,[{key:"onkeyup",value:function(e){var t=e.target.value.trim();if(this.history.showDelete(),!t)return this.reset(),void this.history.hideDelete();13===e.keyCode&&(this.search(t),this.history.setStorage(t),this.history.hideStrorage())}},{key:"onScroll",value:function(e){if(this.nomore)return window.removeEventListener("scroll",this.onscroll);document.documentElement.clientHeight+pageYOffset>document.body.scrollHeight-40&&this.search(this.keyWord,this.page+1)}},{key:"search",value:function(e,t){var n=this;window.addEventListener("scroll",this.onscroll),this.nomore||this.fetching||(this.keyWord!==e&&this.reset(),this.keyWord=e,this.loading(),fetch((0,r.searchUrl)(this.keyWord,t||this.page)).then(function(e){return e.json()}).then(function(e){return n.page=e.data.song.curpage,n.songs[n.page]=e.data.song.list,n.nomore="no results"===e.message,e.data.song.list}).then(function(e){return n.append(e)}).then(function(){return n.done()}).catch(function(){return n.fetching=!1}))}},{key:"loading",value:function(){this.fetching=!0,this.$el.querySelector(".search-loading").classList.add("show")}},{key:"cancalLoading",value:function(){this.fetching=!1,this.$el.querySelector(".search-loading").classList.remove("show")}},{key:"append",value:function(e){var t=e.map(function(e){var t=e.singer.map(function(e){return e.name}).join(" ");return'<a class="song-item" href="#player?artist='+t+"&songid="+e.songid+"&songname="+e.songname+"&albummid="+e.albummid+"&duration="+e.interval+'">\n      <i class="icon-show"></i>\n      <h6 class="threedot">'+e.songname+'</h6>\n      <p class="threedot">'+t+"</p>\n      </a>"}).join("");this.$songs.insertAdjacentHTML("beforeend",t)}},{key:"done",value:function(){this.fetching=!1,this.nomore?(this.$el.querySelector(".loading-icon").style.display="none",this.$el.querySelector(".loading-text").style.display="none",this.$el.querySelector(".loading-done").style.display="block",this.$el.querySelector(".search-loading").classList.add("show")):this.$el.querySelector(".search-loading").classList.remove("show")}},{key:"reset",value:function(){this.page=1,this.songs={},this.keyword="",this.nomore=!1,this.$songs.innerHTML=""}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();(t.SearchHistory=function(){function e(t,n,s){i(this,e),this.$el=t,this.$input=n,this.Search=s,this.$cancel=this.$el.querySelector("#cancle-btn"),this.$del_btn=this.$el.querySelector(".icon-delete"),this.focusOnce=this.onFocus.bind(this),this.$input.addEventListener("focus",this.focusOnce),this.$cancel.addEventListener("click",this.onCancle.bind(this)),this.$del_btn.addEventListener("click",this.ondelete.bind(this)),this.search_history=JSON.parse(localStorage.getItem(this.LOCAL_STORAGE_KEY))||[],this.$history=this.$el.querySelector(".record-list"),this.$record=this.$el.querySelector(".record-keys"),this.$record.addEventListener("click",this)}return s(e,[{key:"handleEvent",value:function(e){var t=e.target;switch(!0){case t.matches(".record-handle")||t.matches(".record-handle a"):this.clearStrorage(),this.showHistory();break;case t.matches(".record-content"):this.hideStrorage(),this.searchItem(t);break;case t.matches(".icon-close"):this.deletItem(t),this.showHistory()}}},{key:"onCancle",value:function(e){e.target.classList.add("hide"),this.$del_btn.classList.add("hide"),this.$el.querySelector(".hot-keys").classList.remove("hide"),this.$el.querySelector(".record-keys").classList.add("hide"),this.$input.addEventListener("focus",this.focusOnce),this.$input.value="",this.Search.reset(),this.Search.cancalLoading()}},{key:"onFocus",value:function(){this.$cancel.classList.remove("hide"),this.$el.querySelector(".hot-keys").classList.add("hide"),this.$el.querySelector(".record-keys").classList.remove("hide"),this.$history.classList.remove("hide"),this.showHistory(),this.$input.removeEventListener("focus",this.focusOnce),window.removeEventListener("scroll",this.Search.onscroll)}},{key:"showDelete",value:function(){this.$del_btn.classList.remove("hide")}},{key:"hideDelete",value:function(){this.$del_btn.classList.add("hide")}},{key:"ondelete",value:function(){this.$input.value="",this.hideDelete(),this.showHistory(),this.Search.reset(),this.Search.cancalLoading()}},{key:"showHistory",value:function(){this.$history.innerHTML=this.search_history.map(function(e,t){return' <li><a href="javascritp:void(0);" class="record-main">\n            <span class="icon-reclick"></span>\n            <span class="record-content threedot">'+e+'</span>\n            <span class="icon-close" data-index=\''+t+"'></span>\n        </a>\n    </li>"}).join("");var e=this.$el.querySelector(".record-handle");this.search_history.length>0?e.classList.remove("hide"):e.classList.add("hide")}},{key:"setStorage",value:function(e){this.search_history=this.search_history.filter(function(t){return t!==e}),this.search_history.unshift(e),localStorage.setItem(this.LOCAL_STORAGE_KEY,JSON.stringify(this.search_history))}},{key:"clearStrorage",value:function(){this.search_history=[],localStorage.setItem(this.LOCAL_STORAGE_KEY,JSON.stringify(this.search_history))}},{key:"hideStrorage",value:function(){this.$el.querySelector(".record-keys").classList.add("hide")}},{key:"searchItem",value:function(e){var t=e.innerText.trim();t&&(this.$input.value=t,this.Search.search(t),this.showDelete(),this.setStorage(t))}},{key:"deletItem",value:function(e){var t=e.dataset.index;t&&(this.search_history.splice(t,1),localStorage.setItem(this.LOCAL_STORAGE_KEY,JSON.stringify(this.search_history)))}}]),e}()).prototype.LOCAL_STORAGE_KEY="qq_search_history"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.MusicPlayer=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),o=n(12),a=n(13);t.MusicPlayer=function(){function e(t){i(this,e),this.$el=t,this.$el.addEventListener("click",this),this.$audio=this.createAudio(),this.progress=new o.ProgressBar(this.$el.querySelector(".progress")),this.lyrics=new a.Lyrics(this.$el.querySelector(".player-lyrics"),this.$audio),this.fetching=!1}return s(e,[{key:"handleEvent",value:function(e){var t=e.target;switch(!0){case t.matches(".icon-pause"):this.onPause(e);break;case t.matches(".icon-play"):this.onPlay(e);break;case t.matches(".icon-list"):this.hide()}}},{key:"createAudio",value:function(){var e=this,t=document.createElement("audio");return t.id="player-"+Math.floor(100*Math.random())+"-"+ +new Date,t.addEventListener("ended",function(){e.$audio.play(),e.lyrics.restart(),e.progress.restart()}),document.body.appendChild(t),t}},{key:"play",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t){this.$el.querySelector(".song-name").innerText=t.songname,this.$el.querySelector(".song-artist").innerText=t.artist;var n=(0,r.albumCoverUrl)(t.albummid);this.$el.querySelector(".album-image").src=n,this.$el.querySelector(".player-background").style.backgroundImage="url("+n+")",this.progress.reset(t.duration),t.songid&&(this.songid=t.songid,this.$el.querySelector(".icon-action").className="icon-action icon-play",this.$audio.src=(0,r.songUrl)(this.songid),this.fetching=!0,fetch((0,r.lyricsUrl)(this.songid)).then(function(e){return e.json()}).then(function(e){return e.lyric}).then(function(t){return e.lyrics.reset(t)}).catch(function(e){}).then(function(){return e.fetching=!1})),this.show()}}},{key:"onPause",value:function(e){e.target.classList.remove("icon-pause"),e.target.classList.add("icon-play"),this.$audio.pause(),this.progress.pause(),this.lyrics.pause()}},{key:"onPlay",value:function(e){this.fetching||(e.target.classList.remove("icon-play"),e.target.classList.add("icon-pause"),this.$audio.play(),this.progress.start(),this.lyrics.start())}},{key:"hide",value:function(){this.$el.classList.remove("show")}},{key:"show",value:function(){this.$el.classList.add("show")}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.ProgressBar=function(){function e(t,n){i(this,e),this.$el=t,this.progress=0,this.duration=n||0,this.elapsed=0,this.render(),this.$progress=this.$el.querySelector(".progress-bar-inner"),this.$elapsed=this.$el.querySelector(".progress-elapsed"),this.$duration=this.$el.querySelector(".progress-duration"),this.$elapsed.innerText=this.formatTime(this.elapsed),this.$duration.innerText=this.formatTime(this.duration),this.start()}return s(e,[{key:"start",value:function(){this.intervalId=setInterval(this.update.bind(this),50)}},{key:"pause",value:function(){clearInterval(this.intervalId)}},{key:"reset",value:function(e){this.pause(),this.progress=0,this.elapsed=0,this.$progress.style.transform="translate(-100%)",this.$elapsed.innerText=this.formatTime(this.elapsed),e&&(this.duration=+e,this.$duration.innerText=this.formatTime(this.duration))}},{key:"update",value:function(){this.elapsed+=.05,this.progress=this.elapsed/this.duration,this.elapsed>=this.duration&&this.reset(),this.$progress.style.transform="translate("+(100*this.progress-100)+"%)",this.$elapsed.innerText=this.formatTime(this.elapsed)}},{key:"render",value:function(){this.$el.innerHTML='\n        <div class="progress-time progress-elapsed"></div>\n             <div class="progress-bar">\n                  <div class="progress-bar-inner"></div>\n            </div>\n        <div class="progress-time progress-duration"></div>'}},{key:"formatTime",value:function(e){var t=Math.floor(e/60),n=Math.floor(e%60);return t<10&&(t="0"+t),n<10&&(n="0"+n),t+":"+n}},{key:"restart",value:function(){this.reset(),this.start()}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();(t.Lyrics=function(){function e(t,n){i(this,e),this.$el=t,this.$el.innerHTML='<div class="lyric-box"></div>',this.$lyricbox=this.$el.querySelector(".lyric-box"),this.index=0,this.text="",this.lyrics=[],this.$audio=n,this.reset(this.text)}return s(e,[{key:"pause",value:function(){clearInterval(this.intervalId)}},{key:"start",value:function(){this.pause(),this.intervalId=setInterval(this.update.bind(this),1e3)}},{key:"update",value:function(){if(this.elapsed=Math.round(this.$audio?this.$audio.currentTime:this.elapsed+1),this.index!==this.lyrics.length-1){for(var e=0,t=this.lyrics.length;e<t;e++){var n=this.getSeconds(this.lyrics[e]);if(this.elapsed===n&&(!this.lyrics[e+1]||this.elapsed<this.getSeconds(this.lyrics[e+1]))){this.$lyricbox.children[this.index].classList.remove("active"),this.$lyricbox.children[e].classList.add("active"),this.index=e;break}}if(this.index>2){var i=-(this.index-2)*this.LINE_HEIGHT;this.$lyricbox.style.transform="translateY("+i+"px)"}}}},{key:"reset",value:function(e){this.pause(),this.index=0,this.elapsed=0,this.$lyricbox.style.transform="translateY(0)";var t=this.$lyricbox.querySelector(".active");t&&t.classList.remove("active"),e&&(this.text=this.formateText(e)||"",this.lyrics=this.text.match(/^\[\d{2}:\d{2}.\d{2}\](.+)$/gm)||[],this.lyrics.length&&this.render()),this.lyrics.length&&this.$lyricbox.children[this.index].classList.add("active")}},{key:"restart",value:function(){this.reset(),this.start()}},{key:"render",value:function(){this.$lyricbox.innerHTML=this.lyrics.map(function(e){return'<p class="lyric-line ">'+e.slice(10)+"</p>"}).join("")}},{key:"formateText",value:function(e){var t=document.createElement("div");return t.innerHTML=e,t.innerText}},{key:"getSeconds",value:function(e){return+e.replace(/^\[(\d{2}):(\d{2}).*/,function(e,t,n){return 60*+t+ +n})}}]),e}()).prototype.LINE_HEIGHT=42}]);